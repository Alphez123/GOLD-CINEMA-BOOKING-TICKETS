{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Account - Gold Cinema</title>

    <link rel="stylesheet" href="{% static 'css/accoun.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
</head>
<style>
    /* Color Palette */
    :root {
        --purple-dark: #4a148c;
        /* Dark Purple for background */
        --purple-light: #7b1fa2;
        /* Light Purple for accents/buttons */
        --purple-accent: #e1bee7;
        /* Very light purple for text/borders */
        --text-primary: #000000;
        /* Off-white for main text */
        --text-warning: #ff5252;
        /* Red for deletion warnings */
        --shadow-color: rgba(0, 0, 0, 0.4);
    }

    /* Global Styles */
    body {
        font-family: 'Poppins', sans-serif;
        background: linear-gradient(45deg, #a36fff, #3a00b5);
        color: var(--text-primary);
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        margin: 0;
        padding: 20px;
        background: radial-gradient(circle at center, #4b00d1 0%, #1a0065 100%);
        background-image:
            linear-gradient(to right, rgba(0, 49, 183, 0.6), transparent),
            url("/static/images/cinema.jpg");
        /* path to your image */
        background-size: cover;
        /* makes the image fill the screen */
        background-repeat: no-repeat;
        /* prevents tiling */
        background-position: center;
        /* centers the image */
        background-attachment: fixed;
    }

    /* Container and Card */
    .account-container {
        width: 100%;
        max-width: 300px;
        padding: 40px;
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(15px);
        -webkit-backdrop-filter: blur(15px);
        border-radius: 15px;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        text-align: center;
        border: 1px solid rgba(255, 255, 255, 0.2);
    }

    h1 {
        font-weight: 600;
        font-size: 2.2em;
        margin-bottom: 30px;
        color: #ffffff;
        border-bottom: 2px solid var(--purple-accent);
        padding-bottom: 10px;
    }

    /* User Info Card Styling */
    .user-info-card {
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        padding: 25px;
        border-radius: 10px;
        margin-bottom: 30px;
        text-align: left;
        border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .info-group {
        display: flex;
        align-items: center;
        padding: 10px 0;
        border-bottom: 1px solid var(--purple-accent);
    }

    .info-group:last-child {
        border-bottom: none;
    }

    .info-group strong {
        min-width: 120px;
        font-weight: 600;
    }

    .icon {
        font-size: 1.2em;
        margin-right: 15px;
        color: #fff;
        width: 20px;
        text-align: center;
    }

    p {
        color: #fff;
    }

    /* Buttons Styling */
    .buttons {
        display: flex;
        justify-content: space-around;
        margin-bottom: 40px;
    }

    .btn-primary,
    .btn-secondary,
    .btn-delete {
        padding: 12px 25px;
        font-size: 1em;
        font-weight: 600;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        transition: background-color 0.3s ease, transform 0.1s ease;
        text-transform: uppercase;
    }

    .btn-primary {
        background-color: var(--purple-accent);
        color: var(--purple-dark);
    }

    .btn-primary:hover {
        background-color: #d1b1e6;
        transform: translateY(-2px);
    }

    .btn-secondary {
        background-color: var(--purple-dark);
        color: var(--text-primary);
        border: 1px solid var(--purple-accent);
    }

    .btn-secondary:hover {
        background-color: #3f0f73;
    }

    /* Deletion Section Styling */
    .deletion-section {
        border-top: 1px dashed var(--purple-accent);
        padding-top: 30px;
        text-align: center;
    }

    .btn-delete {
        background-color: var(--text-warning);
        color: white;
        margin-bottom: 10px;
    }

    .btn-delete:hover {
        background-color: #d83d3d;
        transform: translateY(-2px);
    }

    .warning-text {
        color: var(--purple-accent);
        font-size: 0.9em;
        font-style: italic;
        margin-top: 5px;
    }

    .chatbot-container {
        position: fixed;
        bottom: 20px;
        right: 20px;
        z-index: 1500;
        /* High Z-index to ensure it sits above everything */
    }

    /* 2. Floating Tab Button */
    .chat-tab-btn {
        background: #ff007f;
        /* Pink/Magenta color for visibility */
        border: none;
        border-radius: 50%;
        color: white;
        width: 55px;
        height: 55px;
        font-size: 1.5em;
        cursor: pointer;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
        transition: transform 0.3s, 0.3s;
    }

    .chat-tab-btn:hover {
        background: #ff3399;
        transform: scale(1.1);
    }

    /* 3. Chat Window (Initially Hidden) */
    .chat-window {
        display: none;
        /* HIDES by default */
        position: absolute;
        bottom: 70px;
        /* Position above the tab button */
        right: 0;
        width: 300px;
        height: 400px;
        background: #1a004d;
        /* Dark purple background */
        border-radius: 10px;
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.6);
        overflow: hidden;
        flex-direction: column;
    }

    /* 4. Toggling State: Makes the window visible when JavaScript adds the class */
    .chat-window.visible {
        display: flex !important;
        /* Forces visibility and flex layout */
    }

    /* 5. Chat Header */
    .chat-header {
        background: #7a33ff;
        color: white;
        padding: 10px 15px;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    /* 6. Message Styling */
    .chat-body {
        flex-grow: 1;
        padding: 15px;
        overflow-y: auto;
        background-color: #0b012b;
    }

    .chat-message {
        padding: 8px 12px;
        border-radius: 15px;
        margin-bottom: 10px;
        max-width: 80%;
    }

    .bot-message {
        background-color: #3a00b5;
        color: white;
        margin-right: auto;
    }

    .user-message {
        background-color: #ff007f;
        color: white;
        margin-left: auto;
    }

    /* 7. Input/Footer */
    .chat-footer {
        display: flex;
        padding: 10px;
        border-top: 1px solid #7a33ff;
        background-color: #1a004d;
    }

    #chatInput {
        flex-grow: 1;
        padding: 10px;
        border: 1px solid #7a33ff;
        border-radius: 20px;
        margin-right: 8px;
        background-color: #0b012b;
        color: white;
    }

    #chatSendBtn {
        background: #ff007f;
        border: none;
        border-radius: 50%;
        color: white;
        width: 35px;
        height: 35px;
        cursor: pointer;
    }

    /* Icon spacing for new elements */
    .account-container h1 i {
        margin-right: 10px;
        color: #7a33ff;
    }

    .edit-profile-link {
        display: inline-flex;
        align-items: center;
        margin-top: 15px;
        color: var(--purple-accent);
        text-decoration: none;
        font-weight: 500;
        transition: color 0.3s;
    }

    .edit-profile-link:hover {
        color: #fff;
    }

    .edit-profile-link i {
        margin-right: 8px;
    }

    .btn-primary i,
    .btn-secondary i {
        margin-right: 8px;
    }

    .warning-text i {
        margin-right: 5px;
        color: #ffcc00;
    }

    /* Ensure proper alignment for all icons */
    .info-group,
    .buttons,
    .deletion-section {
        display: flex;
        align-items: center;
    }

    .btn-secondary {
        background-color: var(--purple-dark);
        color: var(--text-primary);
        border: 1px solid var(--purple-accent);
    }

    .btn-secondary:hover {
        background-color: #3f0f73;
    }

    /* Deletion Section Styling */
    .deletion-section {
        border-top: 1px dashed var(--purple-accent);
        padding-top: 30px;
        text-align: center;
    }

    .btn-delete {
        background-color: var(--text-warning);
        color: white;
        margin-bottom: 10px;
    }

    .btn-delete:hover {
        background-color: #d83d3d;
        transform: translateY(-2px);
    }

    .warning-text {
        color: var(--purple-accent);
        font-size: 0.9em;
        font-style: italic;
        margin-top: 5px;
    }

    .chatbot-container {
        position: fixed;
        bottom: 20px;
        right: 20px;
        z-index: 1500;
        /* High Z-index to ensure it sits above everything */
    }

    /* 2. Floating Tab Button */
    .chat-tab-btn {
        background: #ff007f;
        /* Pink/Magenta color for visibility */
        border: none;
        border-radius: 50%;
        color: white;
        width: 55px;
        height: 55px;
        font-size: 1.5em;
        cursor: pointer;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
        transition: transform 0.3s, 0.3s;
    }

    .chat-tab-btn:hover {
        background: #ff3399;
        transform: scale(1.1);
    }

    /* 3. Chat Window (Initially Hidden) */
    .chat-window {
        display: none;
        /* HIDES by default */
        position: absolute;
        bottom: 70px;
        /* Position above the tab button */
        right: 0;
        width: 300px;
        height: 400px;
        background: #1a004d;
        /* Dark purple background */
        border-radius: 10px;
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.6);
        overflow: hidden;
        flex-direction: column;
    }

    /* 4. Toggling State: Makes the window visible when JavaScript adds the class */
    .chat-window.visible {
        display: flex !important;
        /* Forces visibility and flex layout */
    }

    /* 5. Chat Header */
    .chat-header {
        background: #7a33ff;
        color: white;
        padding: 10px 15px;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    /* 6. Message Styling */
    .chat-body {
        flex-grow: 1;
        padding: 15px;
        overflow-y: auto;
        background-color: #0b012b;
    }

    .chat-message {
        padding: 8px 12px;
        border-radius: 15px;
        margin-bottom: 10px;
        max-width: 80%;
    }

    .bot-message {
        background-color: #3a00b5;
        color: white;
        margin-right: auto;
    }

    .user-message {
        background-color: #ff007f;
        color: white;
        margin-left: auto;
    }

    /* 7. Input/Footer */
    .chat-footer {
        display: flex;
        padding: 10px;
        border-top: 1px solid #7a33ff;
        background-color: #1a004d;
    }

    #chatInput {
        flex-grow: 1;
        padding: 10px;
        border: 1px solid #7a33ff;
        border-radius: 20px;
        margin-right: 8px;
        background-color: #0b012b;
        color: white;
    }

    #chatSendBtn {
        background: #ff007f;
        border: none;
        border-radius: 50%;
        color: white;
        width: 35px;
        height: 35px;
        cursor: pointer;
    }

    /* Icon spacing for new elements */
    .account-container h1 i {
        margin-right: 10px;
        color: #7a33ff;
    }

    .edit-profile-link {
        display: inline-flex;
        align-items: center;
        margin-top: 15px;
        color: var(--purple-accent);
        text-decoration: none;
        font-weight: 500;
        transition: color 0.3s;
    }

    .edit-profile-link:hover {
        color: #fff;
    }

    .edit-profile-link i {
        margin-right: 8px;
    }

    .btn-primary i,
    .btn-secondary i {
        margin-right: 8px;
    }

    .warning-text i {
        margin-right: 5px;
        color: #ffcc00;
    }

    /* Ensure proper alignment for all icons */
    .info-group,
    .buttons,
    .deletion-section {
        display: flex;
        align-items: center;
    }

    .buttons {
        gap: 15px;
    }
</style>

<body>
    <div class="account-container">
        <h1><i class="fas fa-user-circle"></i> My Account</h1>

        <div id="userInfo" class="user-info-card">
            <div class="info-group">
                <i class="fas fa-fingerprint icon"></i>
                <p><strong>Customer ID:</strong> <span>{{ user.customer_id }}</span></p>
            </div>

            <div class="info-group">
                <i class="fas fa-user icon"></i>
                <p><strong>Name:</strong>
                    <span>{{ user.first_name }} {{ user.last_name }}</span>
                </p>
            </div>

            <div class="info-group">
                <i class="fas fa-envelope icon"></i>
                <p><strong>Email:</strong> <span>{{ user.email }}</span></p>
            </div>

            <div class="info-group">
                <i class="fas fa-wallet icon"></i>
                <p><strong>Balance:</strong> <span style="color: #00e676;">KSH {{ user.balance }}</span></p>
            </div>

            <div class="buttons" style="margin-top: 20px;">
                <a href="{% url 'deposit' %}" class="btn-primary" style="text-decoration: none; color: #4a148c;">
                    <i class="fas fa-plus-circle"></i> Deposit Funds
                </a>
                <a href="{% url 'update_account' %}" class="btn-secondary" style="text-decoration: none;">
                    <i class="fas fa-edit"></i> Edit Profile
                </a>
            </div>

            <form action="{% url 'delete_account' %}" method="POST" class="deletion-section"
                onsubmit="return confirm('Are you sure you want to delete your account? This cannot be undone.');">
                {% csrf_token %}
                <button type="submit" class="btn-delete">
                    <i class="fas fa-trash-alt"></i> Delete Account
                </button>
            </form>
            <p class="warning-text">
                <i class="fas fa-exclamation-triangle"></i> Account deletion is permanent.
            </p>
        </div>
    </div>
</body>

</html>